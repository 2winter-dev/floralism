(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[89],{3006:function(t,e,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/component/ForgetPassword",function(){return s(2852)}])},3409:function(t,e,s){"use strict";s.d(e,{a:function(){return n}});let n={api_url:"https://admin.floralismhk.com"}},5829:function(t,e,s){"use strict";var n=s(3409);e.Z={sendEmail:t=>fetch("".concat(n.a.api_url,"/api/ems/send"),{body:JSON.stringify(t),method:"POST",mode:"cors",headers:{"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),register:t=>fetch("".concat(n.a.api_url,"/api/user/registerByEmail"),{body:JSON.stringify(t),method:"POST",mode:"cors",headers:{"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),loginByCode:t=>fetch("".concat(n.a.api_url,"/api/user/loginByCode"),{body:JSON.stringify(t),method:"POST",mode:"cors",headers:{"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),loginByPassword:t=>fetch("".concat(n.a.api_url,"/api/user/passwordLogin/"),{body:JSON.stringify(t),method:"POST",mode:"cors",headers:{"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),verifyCode:t=>fetch("".concat(n.a.api_url,"/api/user/verifyCode"),{body:JSON.stringify(t),method:"POST",mode:"cors",headers:{"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),resetPassword:t=>fetch("".concat(n.a.api_url,"/api/user/resetPassword"),{body:JSON.stringify(t),method:"POST",mode:"cors",headers:{"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),AddToCart:t=>fetch("".concat(n.a.api_url,"/api/cart/create"),{body:JSON.stringify({flower_specs_id:t.flower_specs_id,num:t.num,cardtype:t.cardtype,cardcontent:t.cardcontent}),method:"POST",mode:"cors",headers:{Authorization:"Bearer ".concat(t.cookie),"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),changeShopCarNumber:t=>fetch("".concat(n.a.api_url,"/api/cart/updateNum"),{body:JSON.stringify({id:t.id,num:t.num}),method:"POST",mode:"cors",headers:{Authorization:"Bearer ".concat(t.cookie),"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),deleteProductionFromShopCar:t=>fetch("".concat(n.a.api_url,"/api/cart/delete"),{body:JSON.stringify({ids:t.ids}),method:"POST",mode:"cors",headers:{Authorization:"Bearer ".concat(t.cookie),"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),addAddress:t=>fetch("".concat(n.a.api_url,"/api/address/create"),{body:JSON.stringify({mobile:t.mobile,name:t.username,location:t.address}),method:"POST",mode:"cors",headers:{Authorization:"Bearer ".concat(t.cookie),"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),updateAddress:t=>fetch("".concat(n.a.api_url,"/api/address/update"),{body:JSON.stringify({id:t.id,mobile:t.mobile,name:t.username,location:t.position}),method:"POST",mode:"cors",headers:{Authorization:"Bearer ".concat(t.cookie),"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),setDefaultAddress:t=>fetch("".concat(n.a.api_url,"/api/address/setDefault"),{body:JSON.stringify({id:t.id}),method:"POST",mode:"cors",headers:{Authorization:"Bearer ".concat(t.cookie),"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),createOrder:t=>fetch("".concat(n.a.api_url,"/api/order/create"),{body:JSON.stringify(t),method:"POST",headers:{Authorization:"Bearer ".concat(t.cookie),"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),deleteAddress:t=>fetch("".concat(n.a.api_url,"/api/address/delete"),{body:JSON.stringify({id:t.id}),method:"POST",mode:"cors",headers:{Authorization:"Bearer ".concat(t.cookie),"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),fetchGoods:t=>fetch("".concat(n.a.api_url,"/api/flowers/index?keyword=").concat(t.keyword,"&flower_category_id=").concat(t.flower_category_id,"&listRows=").concat(t.listRows,"&page=").concat(t.page),{method:"GET",headers:{Authorization:"Bearer ".concat(t.cookie),"Content-Type":"application/json","Access-Control-Request-Method":"GET,POST","Access-Control-Request-Headers":"Content-Type"}}),fetchOrderDetail:async t=>await fetch("".concat(n.a.api_url,"/api/order/detail?order_id=").concat(t.id),{method:"GET",headers:{Authorization:"Bearer ".concat(t.cookie),"Content-Type":"application/json","Access-Control-Request-Method":"GET,POST","Access-Control-Request-Headers":"Content-Type"}}),updateUserMessage:async t=>await fetch("".concat(n.a.api_url,"/api/User/changeUserInfo"),{method:"POST",body:JSON.stringify(t),headers:{Authorization:"Bearer ".concat(t.cookie),"Content-Type":"application/json","Access-Control-Request-Method":"GET,POST","Access-Control-Request-Headers":"Content-Type"}})}},2852:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return u}});var n=s(5893),o=s(263),r=s.n(o),i=s(7294),a=s(8228),c=s(5829);function u(t){let[e,s]=(0,i.useState)(0),[o,u]=(0,i.useState)(""),[l,d]=(0,i.useState)(""),[p,h]=(0,i.useState)(0),[y,m]=(0,i.useState)(!1),[_,f]=(0,i.useState)(""),[g,C]=(0,i.useState)(""),T=(0,a.D)({mutationFn:t=>c.Z.sendEmail(t),mutationKey:["sendEmailByForgot"]}),S=(0,a.D)({mutationFn:t=>c.Z.verifyCode(t),mutationKey:["verifyCode"]}),v=(0,a.D)({mutationFn:t=>c.Z.resetPassword(t),mutationKey:["resetPassword"]}),O=()=>{if(!o.trim()){alert("請填寫郵箱以獲取驗證碼");return}T.mutate({email:o.trim(),event:"resetpwd"},{onSuccess:()=>{alert("發送驗證碼成功，請到填寫的郵箱内查看驗證碼")},onError:t=>{alert("發送驗證碼失敗")}}),h(60),m(!0)},b=()=>{v.mutate({email:o.trim(),password:_.trim(),confirmPassword:g.trim()},{onSuccess:async e=>{let s=await e.json();s.code?(alert("重置成功"),t.toLogin()):alert(s.msg)},onError:t=>{alert("重置失敗")}})},R=()=>{S.mutate({email:o.trim(),code:l.trim()},{onSuccess:async t=>{let e=await t.json();e.code?s(1):alert(e.msg)},onError:t=>{alert("驗證失敗")}})};return p&&setTimeout(()=>{h(p-1)},1e3),(0,n.jsx)("div",{className:r().login_total,style:{},children:(0,n.jsxs)("div",{className:"",children:[(0,n.jsx)("div",{style:{width:"100%",cursor:"pointer",alignItems:"flex-end",display:"flex",justifyContent:"flex-end"},children:(0,n.jsx)("span",{onClick:()=>{t.close(),s(0)},style:{color:"white"},className:"iconfont",children:""})}),0===e?(0,n.jsxs)("div",{style:{marginTop:"1.5%"},className:r().login_pannel,children:[(0,n.jsx)("div",{style:{letterSpacing:2,fontSize:24},children:"找回密碼"}),(0,n.jsx)("div",{style:{marginTop:"5%"},children:(0,n.jsx)("input",{type:"text",placeholder:"電郵/賬戶",onChange:t=>u(t.target.value.trim()),value:o,className:r().account_input})}),(0,n.jsx)("div",{style:{marginTop:"5%"},children:(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,n.jsx)("input",{type:"text",placeholder:"請輸入驗證碼",value:l,onChange:t=>d(t.target.value.trim()),style:{flex:1,marginRight:24},className:r().account_input}),(0,n.jsx)("div",{className:r().send_btn,style:{width:"25%",textAlign:"center"},children:p?(0,n.jsxs)("div",{children:[p,"秒后重新發送"]}):y?(0,n.jsx)("div",{onClick:O,children:"重新發送"}):(0,n.jsx)("div",{onClick:O,children:"獲取驗證碼"})})]})}),(0,n.jsx)("div",{style:{marginTop:"5%"},children:(0,n.jsx)("input",{type:"button",onClick:R,className:r().submit_button,value:"提交"})}),(0,n.jsx)("div",{style:{marginTop:"5%",paddingLeft:"3%",display:"flex"},children:(0,n.jsx)("div",{onClick:()=>{s(0),d(""),u(""),t.toLogin()},className:r().changebtn,children:"前往登錄"})})]}):(0,n.jsxs)("div",{style:{marginTop:"1.5%"},className:r().login_pannel,children:[(0,n.jsx)("div",{style:{letterSpacing:2,fontSize:24},children:"重設密碼"}),(0,n.jsx)("div",{style:{marginTop:"2.5%"},children:(0,n.jsx)("input",{type:"password",placeholder:"密碼",value:_,onChange:t=>f(t.target.value),className:r().account_input})}),(0,n.jsx)("div",{style:{marginTop:"2.5%"},children:(0,n.jsx)("input",{type:"password",placeholder:"确认密碼",value:g,onChange:t=>C(t.target.value),className:r().account_input})}),(0,n.jsx)("div",{style:{marginTop:"2.5%"},children:(0,n.jsx)("input",{type:"button",onClick:b,className:r().submit_button,value:"提交"})})]})]})})}},263:function(t){t.exports={register_total:"login_register_total__0tDXn",login_total:"login_login_total__lm3Ff",address_layout:"login_address_layout__t9jHI",login_layout:"login_login_layout__7VdzG",register_layout:"login_register_layout__iMTWw",login_pannel:"login_login_pannel__r20UK",account_input:"login_account_input__lnLIx",forget_password:"login_forget_password__vPv79",submit_button:"login_submit_button__J_G_N",to_register:"login_to_register__IQmmJ",to_login:"login_to_login___ttPg",register_btn:"login_register_btn___U_95",send_btn:"login_send_btn__O1cLJ",changebtn:"login_changebtn__rsIPs"}},3250:function(t,e,s){"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=s(7294),o="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},r=n.useState,i=n.useEffect,a=n.useLayoutEffect,c=n.useDebugValue;function u(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!o(t,s)}catch(t){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(t,e){return e()}:function(t,e){var s=e(),n=r({inst:{value:s,getSnapshot:e}}),o=n[0].inst,l=n[1];return a(function(){o.value=s,o.getSnapshot=e,u(o)&&l({inst:o})},[t,s,e]),i(function(){return u(o)&&l({inst:o}),t(function(){u(o)&&l({inst:o})})},[t]),c(s),s};e.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:l},1688:function(t,e,s){"use strict";t.exports=s(3250)},8228:function(t,e,s){"use strict";s.d(e,{D:function(){return p}});var n=s(7294),o=s(464),r=s(2161),i=s(9886),a=s(81),c=s(3989);class u extends c.l{constructor(t,e){super(),this.client=t,this.setOptions(e),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var e;let s=this.options;this.options=this.client.defaultMutationOptions(t),(0,r.VS)(s,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),null==(e=this.currentMutation)||e.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var t;null==(t=this.currentMutation)||t.removeObserver(this)}}onMutationUpdate(t){this.updateResult();let e={listeners:!0};"success"===t.type?e.onSuccess=!0:"error"===t.type&&(e.onError=!0),this.notify(e)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(t,e){return this.mutateOptions=e,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:void 0!==t?t:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){let t=this.currentMutation?this.currentMutation.state:(0,i.R)(),e={...t,isLoading:"loading"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset};this.currentResult=e}notify(t){a.V.batch(()=>{if(this.mutateOptions&&this.hasListeners()){var e,s,n,o,r,i,a,c;t.onSuccess?(null==(e=(s=this.mutateOptions).onSuccess)||e.call(s,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(n=(o=this.mutateOptions).onSettled)||n.call(o,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)):t.onError&&(null==(r=(i=this.mutateOptions).onError)||r.call(i,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(a=(c=this.mutateOptions).onSettled)||a.call(c,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context))}t.listeners&&this.listeners.forEach(({listener:t})=>{t(this.currentResult)})})}}var l=s(5945),d=s(4798);function p(t,e,s){let i=(0,r.lV)(t,e,s),c=(0,l.NL)({context:i.context}),[p]=n.useState(()=>new u(c,i));n.useEffect(()=>{p.setOptions(i)},[p,i]);let y=(0,o.$)(n.useCallback(t=>p.subscribe(a.V.batchCalls(t)),[p]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),m=n.useCallback((t,e)=>{p.mutate(t,e).catch(h)},[p]);if(y.error&&(0,d.L)(p.options.useErrorBoundary,[y.error]))throw y.error;return{...y,mutate:m,mutateAsync:y.mutate}}function h(){}},464:function(t,e,s){"use strict";s.d(e,{$:function(){return o}});var n=s(1688);let o=n.useSyncExternalStore},4798:function(t,e,s){"use strict";function n(t,e){return"function"==typeof t?t(...e):!!t}s.d(e,{L:function(){return n}})}},function(t){t.O(0,[774,888,179],function(){return t(t.s=3006)}),_N_E=t.O()}]);
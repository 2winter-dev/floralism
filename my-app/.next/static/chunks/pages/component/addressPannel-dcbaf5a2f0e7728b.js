(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[188],{7081:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/component/addressPannel",function(){return o(3822)}])},3409:function(e,t,o){"use strict";o.d(t,{a:function(){return n}});let n={api_url:"https://admin.floralismhk.com"}},5829:function(e,t,o){"use strict";var n=o(3409);t.Z={sendEmail:e=>fetch("".concat(n.a.api_url,"/api/ems/send"),{body:JSON.stringify(e),method:"POST",mode:"cors",headers:{"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),register:e=>fetch("".concat(n.a.api_url,"/api/user/registerByEmail"),{body:JSON.stringify(e),method:"POST",mode:"cors",headers:{"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),loginByCode:e=>fetch("".concat(n.a.api_url,"/api/user/loginByCode"),{body:JSON.stringify(e),method:"POST",mode:"cors",headers:{"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),loginByPassword:e=>fetch("".concat(n.a.api_url,"/api/user/passwordLogin/"),{body:JSON.stringify(e),method:"POST",mode:"cors",headers:{"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),verifyCode:e=>fetch("".concat(n.a.api_url,"/api/user/verifyCode"),{body:JSON.stringify(e),method:"POST",mode:"cors",headers:{"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),resetPassword:e=>fetch("".concat(n.a.api_url,"/api/user/resetPassword"),{body:JSON.stringify(e),method:"POST",mode:"cors",headers:{"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),AddToCart:e=>fetch("".concat(n.a.api_url,"/api/cart/create"),{body:JSON.stringify({flower_specs_id:e.flower_specs_id,num:e.num,cardtype:e.cardtype,cardcontent:e.cardcontent}),method:"POST",mode:"cors",headers:{Authorization:"Bearer ".concat(e.cookie),"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),changeShopCarNumber:e=>fetch("".concat(n.a.api_url,"/api/cart/updateNum"),{body:JSON.stringify({id:e.id,num:e.num}),method:"POST",mode:"cors",headers:{Authorization:"Bearer ".concat(e.cookie),"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),deleteProductionFromShopCar:e=>fetch("".concat(n.a.api_url,"/api/cart/delete"),{body:JSON.stringify({ids:e.ids}),method:"POST",mode:"cors",headers:{Authorization:"Bearer ".concat(e.cookie),"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),addAddress:e=>fetch("".concat(n.a.api_url,"/api/address/create"),{body:JSON.stringify({mobile:e.mobile,name:e.username,location:e.address}),method:"POST",mode:"cors",headers:{Authorization:"Bearer ".concat(e.cookie),"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),updateAddress:e=>fetch("".concat(n.a.api_url,"/api/address/update"),{body:JSON.stringify({id:e.id,mobile:e.mobile,name:e.username,location:e.position}),method:"POST",mode:"cors",headers:{Authorization:"Bearer ".concat(e.cookie),"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),setDefaultAddress:e=>fetch("".concat(n.a.api_url,"/api/address/setDefault"),{body:JSON.stringify({id:e.id}),method:"POST",mode:"cors",headers:{Authorization:"Bearer ".concat(e.cookie),"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),createOrder:e=>fetch("".concat(n.a.api_url,"/api/order/create"),{body:JSON.stringify(e),method:"POST",headers:{Authorization:"Bearer ".concat(e.cookie),"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),deleteAddress:e=>fetch("".concat(n.a.api_url,"/api/address/delete"),{body:JSON.stringify({id:e.id}),method:"POST",mode:"cors",headers:{Authorization:"Bearer ".concat(e.cookie),"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),fetchGoods:e=>fetch("".concat(n.a.api_url,"/api/flowers/index?keyword=").concat(e.keyword,"&flower_category_id=").concat(e.flower_category_id,"&listRows=").concat(e.listRows,"&page=").concat(e.page),{method:"GET",headers:{Authorization:"Bearer ".concat(e.cookie),"Content-Type":"application/json","Access-Control-Request-Method":"GET,POST","Access-Control-Request-Headers":"Content-Type"}}),fetchOrderDetail:async e=>await fetch("".concat(n.a.api_url,"/api/order/detail?order_id=").concat(e.id),{method:"GET",headers:{Authorization:"Bearer ".concat(e.cookie),"Content-Type":"application/json","Access-Control-Request-Method":"GET,POST","Access-Control-Request-Headers":"Content-Type"}}),updateUserMessage:async e=>await fetch("".concat(n.a.api_url,"/api/User/changeUserInfo"),{method:"POST",body:JSON.stringify(e),headers:{Authorization:"Bearer ".concat(e.cookie),"Content-Type":"application/json","Access-Control-Request-Method":"GET,POST","Access-Control-Request-Headers":"Content-Type"}})}},3822:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return p}});var n=o(5893),s=o(502),a=o(263),r=o.n(a),i=o(7294),c=o(2673),d=o(5829),l=o(1955);function p(e){let[t,o]=(0,i.useState)(""),[a,p]=(0,i.useState)(""),[u,_]=(0,i.useState)("");(0,i.useEffect)(()=>{o(e.type?e.item.name:""),p(e.type?e.item.location:""),_(e.type?e.item.mobile:"")},[e.type]);let h=(0,c.D)({mutationKey:["addAddress"],mutationFn:async e=>await d.Z.addAddress(e)}),y=(0,c.D)({mutationKey:["updateAddress"],mutationFn:e=>d.Z.updateAddress(e)}),m=()=>{e.type?y.mutate({id,username:t.trim(),address:a.trim(),mobile:u.trim(),cookie:l.Z.get("token")},{onSuccess:async e=>{let t=await e.json();401===t.code?(l.Z.remove("token"),location.reload()):1===t.code?(alert(t.msg),location.reload()):alert(t.msg)},onError:e=>{}}):h.mutate({username:t.trim(),address:a.trim(),mobile:u.trim(),cookie:l.Z.get("token")},{onSuccess:async e=>{let t=await e.json();401===t.code?(l.Z.remove("token"),location.reload()):1===t.code?(alert(t.msg),location.reload()):alert(t.msg)},onError:e=>{}})};return(0,n.jsx)(s.ZP,{open:e.visible,onClose:()=>{e.close()},className:r().address_layout,width:"80%",children:(0,n.jsx)(s.ZP.Body,{children:(0,n.jsx)("div",{className:r().login_total,style:{},children:(0,n.jsxs)("div",{className:"",children:[(0,n.jsx)("div",{style:{width:"100%",cursor:"pointer",alignItems:"flex-end",display:"flex",justifyContent:"flex-end"},children:(0,n.jsx)("span",{onClick:()=>{e.close()},style:{color:"white"},className:"iconfont",children:""})}),(0,n.jsxs)("div",{style:{marginTop:"1.5%"},className:r().login_pannel,children:[(0,n.jsx)("div",{style:{marginTop:"0.5%"},children:e.type?"修改地址":"添加地址"}),(0,n.jsx)("div",{style:{marginTop:"5%"},children:(0,n.jsx)("input",{type:"text",placeholder:"收件人",value:t,onChange:e=>o(e.target.value.trim()),className:r().account_input})}),(0,n.jsx)("div",{style:{marginTop:"5%"},children:(0,n.jsx)("input",{type:"text",placeholder:"地址",value:a,onChange:e=>p(e.target.value.trim()),className:r().account_input})}),(0,n.jsx)("div",{style:{marginTop:"5%"},children:(0,n.jsx)("input",{type:"text",placeholder:"電話",value:u,onChange:e=>_(e.target.value.trim()),className:r().account_input})}),(0,n.jsx)("div",{style:{marginTop:"5%"},children:(0,n.jsx)("input",{type:"button",onClick:m,className:r().submit_button,value:"提交"})})]})]})})})})}},263:function(e){e.exports={register_total:"login_register_total__0tDXn",login_total:"login_login_total__lm3Ff",address_layout:"login_address_layout__t9jHI",login_layout:"login_login_layout__7VdzG",register_layout:"login_register_layout__iMTWw",login_pannel:"login_login_pannel__r20UK",account_input:"login_account_input__lnLIx",forget_password:"login_forget_password__vPv79",submit_button:"login_submit_button__J_G_N",to_register:"login_to_register__IQmmJ",to_login:"login_to_login___ttPg",register_btn:"login_register_btn___U_95",send_btn:"login_send_btn__O1cLJ",changebtn:"login_changebtn__rsIPs"}}},function(e){e.O(0,[871,774,888,179],function(){return e(e.s=7081)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[115,991],{8435:function(e,i,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/User",function(){return t(2629)}])},2629:function(e,i,t){"use strict";t.r(i),t.d(i,{__N_SSP:function(){return p},default:function(){return v}});var l=t(5893);t(6991);var s=t(7602),n=t(7093),d=t.n(n);t(8464);var a=t(7294),r=t(7900),o=t.n(r);t(5152);var c=t(8932),h=t(8228),m=t(5829),_=t(1163),x=t(3822),u=t(1955),g=t(3736),p=!0;function v(e){var i,t,n,r,p,v,j,y,f,N,b;let w=(0,_.useRouter)(),[k,S]=(0,a.useState)("message"),[C,T]=(0,a.useState)({}),[D,I]=(0,a.useState)(null===(i=e.user_data)||void 0===i?void 0:i.username),[L,z]=(0,a.useState)(null===(t=e.user_data)||void 0===t?void 0:t.email),[R,H]=(0,a.useState)(null===(n=e.user_data)||void 0===n?void 0:n.mobile),[Z,W]=(0,a.useState)(e.addList),[B,K]=(0,a.useState)(),[A,E]=(0,a.useState)(),[P,$]=(0,a.useState)(!1),[F,O]=(0,a.useState)(!1),[U,X]=(0,a.useState)(e.orderList),[G,V]=(0,a.useState)(),M=(0,h.D)({mutationKey:["setDefault"],mutationFn:e=>m.Z.setDefaultAddress(e)}),Q=(0,h.D)({mutationFn:e=>m.Z.deleteAddress(e),mutationKey:["deleteAddress"]}),Y=(0,h.D)({mutationFn:e=>m.Z.fetchOrderDetail(e),mutationKey:["fetchOrderDetail"]}),q=(0,h.D)({mutationFn:e=>m.Z.updateUserMessage(e),mutationKey:["updateUserMess"]}),J=e=>{Z.splice(Z.findIndex((e,i)=>C===e.id),1),W([...Z]),alert("刪除成功")},ee=e=>{Z.map(i=>{i.id===e?i.is_default=!0:i.is_default=!1}),W([...Z])},ei=e=>{confirm("你想要刪除這個地址嗎")&&Q.mutate({id:e,cookie:u.Z.get("token")},{onSuccess:async i=>{let t=await i.json();401===t.code?(u.Z.remove("token"),location.reload()):1===t.code?J(e):alert(t.msg)},onError:e=>{alert("删除失败")}})},et=e=>{K(e),M.mutate({id:e,cookie:u.Z.get("token")},{onSuccess:async i=>{let t=await i.json();401===t.code?(u.Z.remove("token"),location.reload()):1===t.code?ee(e):alert(t.msg)}})},el=()=>{q.mutate({username:D.trim(),email:L.trim(),mobile:R.trim(),cookie:u.Z.get("token")},{onSuccess:async e=>{1===(await e.json()).code&&location.reload()}})},es=e=>{Y.mutate({id:e,cookie:u.Z.get("token")},{onSuccess:async e=>{let i=await e.json();1===i.code&&(V(i.data),S("orderDetail"))}})};return(0,a.useEffect)(()=>{},[G]),(0,l.jsxs)("div",{style:{backgroundColor:"rgb(244,244,244)"},children:[(0,l.jsx)(c.default,{cateList:e.cateList,setLogin:O}),(0,l.jsxs)("div",{className:d().main_contain,style:{marginTop:24,marginBottom:46,alignItems:"flex-start"},children:[(0,l.jsx)("div",{className:d().left_contain,children:(0,l.jsxs)("div",{className:d().left_totalPannel,children:[(0,l.jsxs)("div",{className:d().avatar_area,style:{display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",padding:16},children:[(0,l.jsx)("div",{className:d().avatar,children:(0,l.jsx)("img",{src:e.user_data.avatar,style:{width:"100%"}})}),(0,l.jsx)("div",{style:{marginTop:8,fontSize:18,fontWeight:700},children:D}),(0,l.jsx)("div",{style:{marginTop:8},children:L}),(0,l.jsx)("div",{style:{marginTop:8},children:R})]}),(0,l.jsx)("div",{className:d().border,onClick:()=>S("message"),children:(0,l.jsx)("div",{className:"message"===k?"".concat(d().user_btn," ").concat(d().choosen):"".concat(d().user_btn),style:{display:"flex"},children:(0,l.jsx)("div",{children:"信息修改"})})}),(0,l.jsx)("div",{className:d().border,onClick:()=>S("address"),children:(0,l.jsx)("div",{className:"address"===k?"".concat(d().user_btn," ").concat(d().choosen):"".concat(d().user_btn),style:{display:"flex"},children:(0,l.jsx)("div",{children:"地址列表"})})}),(0,l.jsx)("div",{className:d().border,onClick:()=>S("order"),children:(0,l.jsx)("div",{className:"order"===k?"".concat(d().user_btn," ").concat(d().choosen):"".concat(d().user_btn),style:{display:"flex"},children:(0,l.jsx)("div",{children:"訂單列表"})})}),(0,l.jsx)("div",{className:d().border,onClick:()=>{confirm("你確定要退出登陸嗎?")&&(u.Z.remove("token"),w.replace("/"))},children:(0,l.jsx)("div",{className:"".concat(d().user_btn),style:{display:"flex"},children:(0,l.jsx)("div",{children:"退出登錄"})})})]})}),"orderDetail"!==k&&(0,l.jsxs)("div",{className:d().right_contain,children:["message"===k&&(0,l.jsxs)("div",{style:{display:"flex",width:"100%",alignItems:"flex-start",flexDirection:"column",minHeight:500},children:[(0,l.jsx)("h5",{className:d().right_contain_title,children:"信息修改"}),(0,l.jsxs)("div",{className:d().total_contain,style:{marginTop:12,display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[(0,l.jsxs)("div",{className:d().message_contain,style:{marginTop:24},children:["username ",(0,l.jsx)("input",{onInput:e=>I(e.target.value),value:D,style:{borderRadius:4,outline:"none",paddingLeft:4,paddingTop:4,paddingBottom:4},type:"text"})]}),(0,l.jsxs)("div",{className:d().message_contain,style:{marginTop:24},children:["email",(0,l.jsx)("input",{onInput:e=>z(e.target.value),value:L,style:{borderRadius:4,outline:"none",paddingLeft:4,paddingTop:4,paddingBottom:4},type:"text"})]}),(0,l.jsxs)("div",{className:d().message_contain,style:{marginTop:24},children:["mobile",(0,l.jsx)("input",{onInput:e=>H(e.target.value),value:R,style:{borderRadius:4,outline:"none",paddingLeft:4,paddingTop:4,paddingBottom:4},type:"text"})]}),(0,l.jsx)("div",{style:{display:"flex",justifyContent:"center",width:"100%",alignItems:"center"},children:(0,l.jsx)("div",{className:d().submit_btn,onClick:el,style:{cursor:"pointer"},children:"submit"})})]})]}),"address"===k&&(0,l.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",flexDirection:"column",minHeight:500},children:[(0,l.jsxs)("h5",{className:d().right_contain_title,style:{display:"flex",width:"100%",justifyContent:"space-between"},children:["地址列表",(0,l.jsx)("div",{onClick:()=>{$(!0),E(0)},className:d().addAddress_btn,style:{marginRight:14},children:"+ 添加地址"})]}),(0,l.jsx)("div",{style:{display:"flex",flexWrap:"wrap",width:"100%"},children:Z.length?Z.map((e,i)=>(0,l.jsx)("div",{className:o().addressItem,style:{padding:14,marginRight:10,marginTop:10},children:(0,l.jsxs)("div",{onClick:()=>et(e.id),className:o().addressItemDetail,style:{paddingLeft:4,flex:1},children:[(0,l.jsxs)("div",{style:{display:"flex",alignItems:"baseline"},children:[(0,l.jsx)("div",{style:{fontSize:18,fontWeight:"bold"},children:null==e?void 0:e.name}),(0,l.jsx)("div",{style:{marginLeft:10},children:"收"})]}),(0,l.jsx)("div",{style:{marginTop:8},children:null==e?void 0:e.mobile}),(0,l.jsx)("div",{style:{marginTop:4},children:null==e?void 0:e.location}),(0,l.jsxs)("div",{onClick:e=>e.stopPropagation(),style:{display:"flex",alignItems:"flex-start",marginTop:12,justifyContent:"flex-end"},children:[(null==e?void 0:e.is_default)?(0,l.jsx)("span",{style:{marginRight:12},className:"iconfont",children:""}):(0,l.jsx)("span",{onClick:()=>et(e.id),style:{marginRight:12},className:"iconfont",children:""}),(0,l.jsx)("span",{onClick:i=>{ei(null==e?void 0:e.id),i.stopPropagation()},style:{marginRight:12,fontSize:14},className:"iconfont",children:"㒲"}),(0,l.jsx)("span",{onClick:i=>{$(!0),E(1),T(e),i.stopPropagation()},style:{fontSize:15},className:"iconfont",children:""})]})]})},e.id)):null}),(0,l.jsx)("div",{})]}),"order"===k&&(0,l.jsxs)("div",{style:{display:"flex",overflow:"auto",alignItems:"flex-start",flexDirection:"column",minHeight:500},children:[(0,l.jsx)("h5",{className:d().right_contain_title,children:"訂單列表"}),(0,l.jsxs)("table",{style:{width:"100%",minWidth:440,marginTop:24,textAlign:"left"},children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{style:{backgroundColor:"rgb(245,245,245)"},children:[(0,l.jsx)("th",{className:d().tr_padding,children:"訂單詳情"}),(0,l.jsx)("th",{className:d().tr_padding,width:120,children:"總價"}),(0,l.jsx)("th",{className:d().tr_padding,width:100,children:"狀態"}),(0,l.jsx)("th",{className:d().tr_padding,width:100})]})}),U.map((e,i)=>(0,l.jsxs)("tbody",{children:[(0,l.jsx)("tr",{className:d().tr_padding,style:{height:20},children:(0,l.jsx)("td",{className:d().tr_padding,colSpan:4})}),(0,l.jsx)("tr",{className:d().tr_padding,style:{backgroundColor:"rgb(245,245,245)",fontSize:14},children:(0,l.jsx)("td",{className:"".concat(d().tr_padding," ").concat(d().order_desc),colSpan:4,children:(0,l.jsxs)("div",{style:{display:"flex"},children:[(0,l.jsx)("div",{children:null==e?void 0:e.create_time_format}),(0,l.jsxs)("div",{style:{marginLeft:12},children:["訂單號:",null==e?void 0:e.order_no]})]})})}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"".concat(d().tr_padding," ").concat(d().first_column),children:(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",wordBreak:"break-all"},children:[(0,l.jsx)("div",{className:d().product_img,children:(0,l.jsx)("img",{src:null==e?void 0:e.product_coverimage,style:{width:"100%"}})}),(0,l.jsxs)("div",{style:{flex:1},children:[(0,l.jsx)("div",{className:d().product_title,style:{fontSize:14,width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:null==e?void 0:e.product_productname}),(0,l.jsxs)("div",{children:["✖ ",null==e?void 0:e.product_num]})]})]})}),(0,l.jsxs)("td",{style:{fontSize:14},className:"".concat(d().tr_padding," ").concat(d().second_column),children:["HD$",null==e?void 0:e.amount]}),(0,l.jsx)("td",{style:{fontSize:14},className:"".concat(d().tr_padding," ").concat(d().third_column),children:null==e?void 0:e.payment_status_mean}),(0,l.jsx)("td",{style:{fontSize:14},className:"".concat(d().tr_padding," ").concat(d().last_column),children:(0,l.jsx)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:(0,l.jsx)("div",{onClick:()=>{es(null==e?void 0:e.id)},className:d().check_btn,children:(null==e?void 0:e.payment_status)?null:"查看訂單"})})})]})]},i))]})]})]}),"orderDetail"===k&&(0,l.jsxs)("div",{className:d().right_contain,style:{backgroundColor:"transparent"},children:[(0,l.jsx)("div",{className:d().order_detail_area,style:{overflow:"auto"},children:(0,l.jsxs)("div",{style:{minWidth:630,display:"flex",alignItems:"flex-start",flexDirection:"column"},children:[(0,l.jsx)("h5",{className:d().right_contain_title,children:"訂單詳情"}),(0,l.jsxs)("table",{style:{marginTop:24,width:"100%",backgroundColor:"rgb(248,249,250)",padding:8,textAlign:"left"},children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{style:{padding:8},children:"訂單編號"}),(0,l.jsx)("th",{style:{padding:8},children:"訂單日期"}),(0,l.jsx)("th",{style:{padding:8},children:"狀態"}),(0,l.jsx)("th",{style:{padding:8},children:"訂單總價"})]})}),(0,l.jsx)("tbody",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{style:{padding:8,fontWeight:400},children:null==G?void 0:null===(r=G.order_info)||void 0===r?void 0:r.order_no}),(0,l.jsx)("th",{style:{padding:8,fontWeight:400},children:null==G?void 0:null===(p=G.order_info)||void 0===p?void 0:p.create_time_format}),(0,l.jsx)("th",{style:{padding:8,fontWeight:400},children:null==G?void 0:null===(v=G.order_info)||void 0===v?void 0:v.payment_status_mean}),(0,l.jsxs)("th",{style:{padding:8,fontWeight:400},children:["HK$",null==G?void 0:null===(j=G.order_info)||void 0===j?void 0:j.amount]})]})})]})]})}),(0,l.jsx)("div",{className:d().order_detail_area,style:{marginTop:24},children:(0,l.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",flexDirection:"column"},children:[(0,l.jsx)("h5",{className:d().right_contain_title,children:"訂單商品列表"}),(0,l.jsxs)("div",{style:{width:"100%"},children:[G.products.map((e,i)=>(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",marginTop:24,wordBreak:"break-all"},children:[(0,l.jsx)("div",{className:d().product_img,children:(0,l.jsx)("img",{src:null==e?void 0:e.coverimage,style:{width:"100%",borderRadius:8}})}),(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,l.jsx)("div",{className:d().product_title,style:{overflow:"hidden",textOverflow:"ellipsis",wordWrap:"break-word"},children:null==e?void 0:e.productname}),(0,l.jsxs)("div",{style:{color:"rgba(0,0,0,0.5)"},children:["type:",null==e?void 0:e.flower_specs_name]})]}),(0,l.jsxs)("div",{style:{marginLeft:"auto"},children:["HK$",null==e?void 0:e.price," ✖ ",null==e?void 0:e.num]})]})),(0,l.jsxs)("div",{style:{flexDirection:"column",display:"flex",fontSize:14,alignItems:"flex-end",marginTop:24},children:[(0,l.jsxs)("div",{style:{marginBottom:8,display:"flex",width:140},children:[(0,l.jsx)("div",{style:{},children:"總計 "}),":HK$",(0,l.jsx)("div",{style:{marginLeft:3,color:"#d43a43"},children:" "+G.order_info.amount})]}),(null==G?void 0:null===(y=G.order_info)||void 0===y?void 0:y.shipping_pirce)&&(0,l.jsxs)("div",{style:{marginBottom:8,display:"flex",width:140},children:[(0,l.jsx)("div",{style:{},children:"運費 "}),":HK$",(0,l.jsx)("div",{style:{marginLeft:3,color:"#d43a43"},children:" "+(null==G?void 0:null===(f=G.order_info)||void 0===f?void 0:f.amount)})]}),(0,l.jsxs)("div",{style:{marginBottom:8,display:"flex",width:140},children:[(0,l.jsx)("div",{style:{},children:"優惠 "}),":HK$",(0,l.jsx)("div",{style:{marginLeft:3,color:"rgb(64,224,208)"},children:" "+(null==G?void 0:null===(N=G.order_info)||void 0===N?void 0:N.coupon_price)})]})]}),(0,l.jsx)("div",{style:{height:1,width:"100%",backgroundColor:"rgba(0,0,0,0.2)",marginTop:12}}),(0,l.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end",fontSize:14},children:(0,l.jsxs)("div",{style:{marginTop:8,display:"flex",width:140,alignItems:"center"},children:[(0,l.jsx)("div",{style:{},children:"實付 "}),":HK$",(0,l.jsx)("div",{style:{marginLeft:3,fontSize:18,fontWeight:700},children:" "+(null==G?void 0:null===(b=G.order_info)||void 0===b?void 0:b.payment_amount)})]})})]})]})})]})]}),(0,l.jsx)(s.default,{}),(0,l.jsx)(x.default,{type:A,item:C,visible:P,close:()=>$(!1)}),(0,l.jsx)(g.default,{login:F,close:()=>O(!1),toRegister:()=>{O(!1),setRegister(!0)},toForget:()=>{O(!1),setVisible(!0)}})]})}},6991:function(e,i,t){"use strict";t.r(i),t.d(i,{default:function(){return h}});var l=t(5893),s=t(7440),n=t.n(s),d=t(1955),a=t(1664),r=t.n(a),o=t(1163),c=t(7294);function h(e){var i,t;let s=(0,o.useRouter)(),[a,h]=(0,c.useState)(!1);return(0,l.jsxs)("div",{className:"".concat(n().header_background),children:[(0,l.jsxs)("div",{className:"".concat(n().header_layout),children:[(0,l.jsx)("div",{className:"".concat(n().logo),children:(0,l.jsx)(r(),{href:"/",children:(0,l.jsx)("img",{src:"/logo.png",style:{},className:n().logo_pic})})}),(0,l.jsxs)("div",{className:"".concat(n().header_center),children:[(null==e?void 0:null===(i=e.list)||void 0===i?void 0:i.length)&&e.list.map((e,i)=>{var t,s;return i>2?null:(0,l.jsxs)("div",{className:"".concat(n().header_center_label),children:[(0,l.jsxs)("div",{className:"".concat(n().header_center_parent),children:[e.categoryname,!!(null===(t=e.get_child)||void 0===t?void 0:t.length)&&(0,l.jsx)("span",{className:"iconfont ".concat(n().dropdown_btn),style:{fontSize:10},children:""})]}),!!(null===(s=e.get_child)||void 0===s?void 0:s.length)&&(0,l.jsx)("div",{className:"".concat(n().header_center_dropdown),children:e.get_child.map((e,t)=>(0,l.jsx)("div",{children:(0,l.jsx)("a",{href:"/category/".concat(e.id),children:e.categoryname})},i.toString()+t.toString()))})]},e.id)}),(0,l.jsx)("div",{className:"".concat(n().header_center_label),children:(0,l.jsx)(r(),{href:"/ContactPage",children:(0,l.jsx)("div",{className:"".concat(n().header_center_parent),children:"聯係我們"})})}),(0,l.jsx)("div",{className:"".concat(n().header_center_label),children:(0,l.jsx)(r(),{href:"/Aboutus",children:(0,l.jsx)("div",{className:"".concat(n().header_center_parent),children:"關於我們"})})})]}),(0,l.jsx)("div",{className:"".concat(n().header_right),style:{marginLeft:10},children:(0,l.jsxs)("div",{onClick:()=>{d.Z.get("token")?s.push("/User"):e.login()},style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[(0,l.jsx)("span",{style:{},className:"iconfont ".concat(n().mine_icon),children:""}),d.Z.get("token")?" 歡迎":" 登入"]})})]}),(0,l.jsxs)("div",{className:"".concat(n().header_menu),children:[(0,l.jsxs)("div",{className:"".concat(n().header_cate_layout),onClick:()=>h(!a),style:{display:"flex",justifyContent:"space-between"},children:[(0,l.jsx)("span",{children:"分類"}),(0,l.jsx)("span",{style:{display:"inline-block",rotate:a?"45deg":"0deg",fontSize:20,transition:"200ms"},children:a?"+":"≡"})]}),(0,l.jsxs)("div",{className:"".concat(n().dropdown),style:{display:a?"block":"none"},children:[(null==e?void 0:null===(t=e.list)||void 0===t?void 0:t.length)&&e.list.map((e,i)=>(0,l.jsxs)("div",{className:"".concat(n().drop_item),children:[(0,l.jsx)("div",{className:"".concat(n().drop_label),children:e.categoryname}),(0,l.jsx)("div",{className:"".concat(n().child_list),children:e.get_child&&e.get_child.map((e,t)=>(0,l.jsx)("div",{className:"".concat(n().header_center_dropdown),children:(0,l.jsx)(r(),{href:"/category/".concat(e.id),children:e.categoryname})},i.toString()+t.toString()))})]},i)),(0,l.jsxs)("div",{className:"".concat(n().drop_item),children:[(0,l.jsx)("div",{className:"".concat(n().drop_label),children:(0,l.jsx)(r(),{href:"/Aboutus",children:"關於我們"})}),(0,l.jsx)("div",{className:"".concat(n().drop_label),children:(0,l.jsx)(r(),{href:"/ContactPage",children:"聯絡我們"})}),(0,l.jsx)("div",{className:"".concat(n().child_list)})]})]})]})]})}},7440:function(e){e.exports={header_background:"header_header_background__CSmzw",logo_pic:"header_logo_pic__VC6w7",logo:"header_logo__0CHou",header_layout:"header_header_layout__elmxf",drop_item:"header_drop_item__taHmv",header_center_dropdown:"header_header_center_dropdown__AdD18",header_center:"header_header_center__B_amL",header_center_label:"header_header_center_label__jp7bN",header_center_parent:"header_header_center_parent__RXp7c",mine_icon:"header_mine_icon__ExnTv",child_list:"header_child_list__n_G0u",drop_label:"header_drop_label__8aU7Y",header_menu:"header_header_menu__SpgaE",header_cate_layout:"header_header_cate_layout__gQhX3",dropdown:"header_dropdown__TG925",show:"header_show__9vWHV",dropdown_btn:"header_dropdown_btn__b7t6F",change:"header_change__Gyo7l"}}},function(e){e.O(0,[700,848,962,664,345,116,736,569,774,888,179],function(){return e(e.s=8435)}),_N_E=e.O()}]);
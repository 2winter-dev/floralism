(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[116],{3409:function(e,t,o){"use strict";o.d(t,{a:function(){return n}});let n={api_url:"http://admin.floralismhk.com"}},5829:function(e,t,o){"use strict";var n=o(3409);t.Z={sendEmail:e=>fetch("".concat(n.a.api_url,"/api/ems/send"),{body:JSON.stringify(e),method:"POST",mode:"cors",headers:{"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),register:e=>fetch("".concat(n.a.api_url,"/api/user/registerByEmail"),{body:JSON.stringify(e),method:"POST",mode:"cors",headers:{"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),loginByCode:e=>fetch("".concat(n.a.api_url,"/api/user/loginByCode"),{body:JSON.stringify(e),method:"POST",mode:"cors",headers:{"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),loginByPassword:e=>fetch("".concat(n.a.api_url,"/api/user/passwordLogin/"),{body:JSON.stringify(e),method:"POST",mode:"cors",headers:{"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),verifyCode:e=>fetch("".concat(n.a.api_url,"/api/user/verifyCode"),{body:JSON.stringify(e),method:"POST",mode:"cors",headers:{"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),resetPassword:e=>fetch("".concat(n.a.api_url,"/api/user/resetPassword"),{body:JSON.stringify(e),method:"POST",mode:"cors",headers:{"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),AddToCart:e=>fetch("".concat(n.a.api_url,"/api/cart/create"),{body:JSON.stringify({flower_specs_id:e.flower_specs_id,num:e.num,cardtype:e.cardtype,cardcontent:e.cardcontent}),method:"POST",mode:"cors",headers:{Authorization:"Bearer ".concat(e.cookie),"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),changeShopCarNumber:e=>fetch("".concat(n.a.api_url,"/api/cart/updateNum"),{body:JSON.stringify({id:e.id,num:e.num}),method:"POST",mode:"cors",headers:{Authorization:"Bearer ".concat(e.cookie),"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),deleteProductionFromShopCar:e=>fetch("".concat(n.a.api_url,"/api/cart/delete"),{body:JSON.stringify({ids:e.ids}),method:"POST",mode:"cors",headers:{Authorization:"Bearer ".concat(e.cookie),"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),addAddress:e=>fetch("".concat(n.a.api_url,"/api/address/create"),{body:JSON.stringify({mobile:e.mobile,name:e.username,location:e.address}),method:"POST",mode:"cors",headers:{Authorization:"Bearer ".concat(e.cookie),"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),updateAddress:e=>fetch("".concat(n.a.api_url,"/api/address/update"),{body:JSON.stringify({id:e.id,mobile:e.mobile,name:e.username,location:e.position}),method:"POST",mode:"cors",headers:{Authorization:"Bearer ".concat(e.cookie),"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),setDefaultAddress:e=>fetch("".concat(n.a.api_url,"/api/address/setDefault"),{body:JSON.stringify({id:e.id}),method:"POST",mode:"cors",headers:{Authorization:"Bearer ".concat(e.cookie),"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),createOrder:e=>fetch("".concat(n.a.api_url,"/api/order/create"),{body:JSON.stringify(e),method:"POST",headers:{Authorization:"Bearer ".concat(e.cookie),"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),deleteAddress:e=>fetch("".concat(n.a.api_url,"/api/address/delete"),{body:JSON.stringify({id:e.id}),method:"POST",mode:"cors",headers:{Authorization:"Bearer ".concat(e.cookie),"Content-Type":"application/json","Access-Control-Request-Method":"POST","Access-Control-Request-Headers":"Content-Type"}}),fetchGoods:e=>fetch("".concat(n.a.api_url,"/api/flowers/index?keyword=").concat(e.keyword,"&flower_category_id=").concat(e.flower_category_id,"&listRows=").concat(e.listRows,"&page=").concat(e.page),{method:"GET",headers:{Authorization:"Bearer ".concat(e.cookie),"Content-Type":"application/json","Access-Control-Request-Method":"GET,POST","Access-Control-Request-Headers":"Content-Type"}}),fetchOrderDetail:async e=>await fetch("".concat(n.a.api_url,"/api/order/detail?order_id=").concat(e.id),{method:"GET",headers:{Authorization:"Bearer ".concat(e.cookie),"Content-Type":"application/json","Access-Control-Request-Method":"GET,POST","Access-Control-Request-Headers":"Content-Type"}}),updateUserMessage:async e=>await fetch("".concat(n.a.api_url,"/api/User/changeUserInfo"),{method:"POST",body:JSON.stringify(e),headers:{Authorization:"Bearer ".concat(e.cookie),"Content-Type":"application/json","Access-Control-Request-Method":"GET,POST","Access-Control-Request-Headers":"Content-Type"}})}},1116:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return d}});var n=o(5893),s=o(263),a=o.n(s),r=o(7294),i=o(8228),c=o(5829),l=o(1955);function d(e){let[t,o]=(0,r.useState)(e.type),[s,d]=(0,r.useState)(""),[u,p]=(0,r.useState)(""),[h,y]=(0,r.useState)(""),[_,m]=(0,r.useState)(""),[g,C]=(0,r.useState)(""),[T,f]=(0,r.useState)(""),[S,A]=(0,r.useState)(""),[O,j]=(0,r.useState)(0),[x,P]=(0,r.useState)(!1),R=(0,i.D)({mutationFn:e=>c.Z.sendEmail(e),mutationKey:["sendEmailByRegister"]}),b=(0,i.D)({mutationKey:["register"],mutationFn:e=>c.Z.register(e)}),v=()=>{if(!s.trim()){alert("請填寫郵箱以獲取驗證碼");return}R.mutate({email:s.trim(),type:"register"},{onSuccess:async e=>{let t=await e.json();t.code?alert("發送驗證碼成功，請到填寫的郵箱内查看驗證碼"):alert(t.msg)},onError:()=>alert("發送驗證碼失敗")}),j(60),P(!0)},q=()=>{if(!_.trim()){alert("請填寫姓名");return}if(!h.trim()){alert("請填寫手機號碼");return}if(!T.trim()){alert("請填寫密碼");return}if(T.trim()!==S.trim()){alert("兩次輸入的密碼不同，請保證一致");return}if(!g){alert("請填寫收到的驗證碼");return}b.mutate({email:s.trim(),code:g.trim(),password:T.trim(),mobile:h.trim(),username:_.trim()},{onSuccess:async t=>{let o=await t.json();1===o.code?(e.close(),l.Z.set("token",o.data.token,{expires:1}),alert("注冊成功"),location.reload()):alert(o.msg)},onError:e=>{alert("注冊失敗")}})};return O&&setTimeout(()=>{j(O-1)},1e3),(0,n.jsx)("div",{className:a().register_total,style:{},children:(0,n.jsxs)("div",{className:"",children:[(0,n.jsx)("div",{style:{width:"100%",cursor:"pointer",alignItems:"flex-end",display:"flex",justifyContent:"flex-end"},children:(0,n.jsx)("span",{onClick:e.close,style:{color:"white"},className:"iconfont",children:""})}),(0,n.jsxs)("div",{style:{},className:a().login_pannel,children:[(0,n.jsx)("div",{style:{letterSpacing:2,fontSize:24},children:"建立賬戶"}),(0,n.jsx)("div",{style:{marginTop:"2.5%"},children:(0,n.jsx)("input",{type:"text",placeholder:"姓名",value:_,onChange:e=>m(e.target.value),className:a().account_input})}),(0,n.jsx)("div",{style:{marginTop:"2.5%"},children:(0,n.jsx)("input",{type:"text",placeholder:"電話",value:h,onChange:e=>y(e.target.value),className:a().account_input})}),(0,n.jsx)("div",{style:{marginTop:"2.5%"},children:(0,n.jsx)("input",{type:"password",placeholder:"密碼",value:T,onChange:e=>f(e.target.value),className:a().account_input})}),(0,n.jsx)("div",{style:{marginTop:"2.5%"},children:(0,n.jsx)("input",{type:"password",placeholder:"确认密碼",value:S,onChange:e=>A(e.target.value),className:a().account_input})}),(0,n.jsx)("div",{style:{marginTop:"2.5%",width:"100%"},children:(0,n.jsx)("input",{type:"text",placeholder:"郵箱",className:a().account_input,value:s,onChange:e=>{d(e.target.value)}})}),(0,n.jsx)("div",{style:{marginTop:"2.5%"},children:(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,n.jsx)("input",{type:"text",placeholder:"請輸入驗證碼",value:g,onChange:e=>C(e.target.value),style:{flex:1,marginRight:24},className:a().account_input}),(0,n.jsx)("div",{className:a().send_btn,style:{width:"25%",textAlign:"center"},children:O?(0,n.jsxs)("div",{children:[O,"秒后重新發送"]}):x?(0,n.jsx)("div",{children:"重新發送"}):(0,n.jsx)("div",{onClick:v,children:"獲取驗證碼"})})]})}),(0,n.jsxs)("div",{style:{marginTop:"2.5%"},children:[(0,n.jsx)("input",{type:"button",style:{marginRight:12},onClick:q,className:a().register_btn,value:"建立"}),(0,n.jsx)("a",{onClick:e.toLogin,className:a().to_login,children:"前往登錄"})]})]})]})})}},263:function(e){e.exports={register_total:"login_register_total__0tDXn",login_total:"login_login_total__lm3Ff",address_layout:"login_address_layout__t9jHI",login_layout:"login_login_layout__7VdzG",register_layout:"login_register_layout__iMTWw",login_pannel:"login_login_pannel__r20UK",account_input:"login_account_input__lnLIx",forget_password:"login_forget_password__vPv79",submit_button:"login_submit_button__J_G_N",to_register:"login_to_register__IQmmJ",to_login:"login_to_login___ttPg",register_btn:"login_register_btn___U_95",send_btn:"login_send_btn__O1cLJ",changebtn:"login_changebtn__rsIPs"}}}]);